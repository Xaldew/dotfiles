#!/usr/bin/env bash

if [ "$OSTYPE" = "cygwin" ]; then
    export SHELLOPTS
    set -o igncr;
    export CHERE_INVOKING=1
    function sudo ()
    {
        cygstart --action=runas $@
    }

    if [ -z "$SSH_AUTH_SOCK" ]; then
        eval $(ssh-agent) > /dev/null
    fi
else
    # Enable gpg-agent as an ssh-agent.
    GPG_TTY=$(tty)
    export GPG_TTY
    unset SSH_AGENT_PID
    gpg-connect-agent /bye
    if [ "${gnupg_SSH_AUTH_SOCK_by:-0}" -ne $$ ]; then
        export SSH_AUTH_SOCK="$(gpgconf --list-dirs agent-ssh-socket)"
    fi
fi

if [ -f ~/.profile ]; then . ~/.profile; fi
